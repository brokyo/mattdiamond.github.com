<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <script type="text/javascript" src="http://cdn.tonejs.org/latest/Tone.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script type="text/javascript">

        var letters = ['C','C#','D','D#','E','F','F#','G','G#','A','A#','B'],
            letterIndex = 0,
            octave = 1,
            notes = [];

        for (var i = 0; i < 60; i ++){
            var note = letters[letterIndex] + octave;
            notes.push(note);

            if (++letterIndex >= letters.length){
                letterIndex = 0;
                octave++;
            }
        }

        $(function(){
            var synth = new Tone.AMSynth(),
                timer = $('#timer');

            synth.toMaster();

            var ws = new WebSocket('wss://wss.redditmedia.com/thebutton?h=6986d10ce1927d1843845051b10065f4e9aee3c2&e=1429391946');

            ws.onmessage = function(e){
                var seconds = $.parseJSON(e.data).payload.seconds_left;
                synth.triggerAttackRelease(notes[seconds - 1], 0.1);
                timer.text(seconds).show().fadeOut(750);
            }
        });

    </script>
    <link href='http://fonts.googleapis.com/css?family=Lato:100' rel='stylesheet' type='text/css'>
    <style type="text/css">
        body {
            text-align: center;
            font-family: 'Lato', sans-serif;
            font-weight: 100;
        }
        #timer {
            margin: 100px auto 0 auto;
            font-size: 400px;
        }
    </style>
</head>
<body>
    <div id="timer"></div>
</body>
</html>